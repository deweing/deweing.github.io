---
layout: post
title: 网络文件系统 (NFS)
category: 技术
tags: linux
keywords: nfs
description:
---

### 1.安装NFS服务器

```
sudo apt-get install nfs-kernel-server
```

### 2.配置
配置共享的目录，在/etc/exports文件中添加共享目录：

```
/home/nfs/share     *(ro,sync,no_root_squash)
/data/web/     10.0.0.0/24(rw,sync,no_subtree_check)
```

其中：
/home/nfs/share是服务器要共享的目录
*代表所有ip
rw为读写，ro为只读
sync为立刻写入硬盘，rsync为先写入缓存
no_all_squash     保留共享文件的UID和GID（默认）
root_squash      root用户的所有请求映射成如anonymous用户一样的权限（默认）
no_root_squash     root用户具有根目录的完全管理访问权限
subtree      若输出目录是一个子目录，则nfs服务器将检查其父目录的权限(默认设置)
no_subtree     与subtree相反

### 3.启动NFS服务器

```
sudo service nfs-kernel-server start
```

### 4.NFS客户端

```
sudo apt-get install nfs-common
```

使用mount命令来挂载其他机器共享的NFS目录：

```
sudo mount example.hostname.com:/ubuntu /local/ubuntu
```

挂载点 /local/ubuntu 目录必须已经存在。而且在 /local/ubuntu 目录中没有文件或子目录

另一个挂载其他机器的 NFS 共享的方式就是在 /etc/fstab 文件中添加一行。该行必须指明 NFS 服务器的主机名、服务器输出的目录名以及挂载 NFS 共享的本机目录。

```
example.hostname.com:/ubuntu /local/ubuntu nfs rsize=8192,wsize=8192,timeo=14,intr
```

卸载挂载点

```
umonut /local/ubuntu
```

from：
https://help.ubuntu.com/lts/serverguide/network-file-system.html
http://www.cnblogs.com/mchina/archive/2013/01/03/2840040.html
