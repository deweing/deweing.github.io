<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="http://deweing.github.io/page/3/index.html">
<meta property="og:site_name" content="Hello World">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello World">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://deweing.github.io/page/3/"/>





  <title> Hello World </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello World</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/06/24/git-config-and-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/24/git-config-and-command/" itemprop="url">
                  Git配置和常用命令
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-25T00:00:00+08:00">
                2015-06-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Git配置"><a href="#Git配置" class="headerlink" title="Git配置"></a>Git配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">git config --global user.name &quot;hunng&quot;</div><div class="line">git config --global user.email &quot;huangthink@gmail.com&quot;</div><div class="line">git config --global color.ui true</div><div class="line">git config --global alias.co checkout</div><div class="line">git config --global alias.ci commit</div><div class="line">git config --global alias.st status</div><div class="line">git config --global alias.br branch</div><div class="line">git config -l  # 列举所有配置</div></pre></td></tr></table></figure>
<p>用户的git配置文件在~/.gitconfig，我的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">cat .gitconfig</div><div class="line">[user]</div><div class="line">    email = huangthink@gmail.com</div><div class="line">    name = hunng</div><div class="line">[color]</div><div class="line">    ui = auto</div><div class="line">[color &quot;branch&quot;]</div><div class="line">    current = yellow reverse</div><div class="line">    local = yellow</div><div class="line">    remote = green</div><div class="line">[color &quot;diff&quot;]</div><div class="line">    meta = yellow bold</div><div class="line">    frag = magenta bold</div><div class="line">    old = red bold</div><div class="line">    new = green bold</div><div class="line">[color &quot;status&quot;]</div><div class="line">    added = yellow</div><div class="line">    changed = green</div><div class="line">    untracked = cyan</div><div class="line">[alias]</div><div class="line">    st = &quot;status&quot;</div><div class="line">    co = checkout</div><div class="line">    ls = &quot;ls-files&quot;</div><div class="line">    ci = commit</div><div class="line">    br = branch</div><div class="line">    rt = reset --hard</div><div class="line">    unstage = reset HEAD</div><div class="line">    uncommit = reset --soft HEAD^</div><div class="line">    l = log --pretty=oneline --abbrev-commit --graph --decorate</div><div class="line">   amend = commit --amend</div><div class="line">   who = shortlog -n -s --no-merges</div><div class="line">    g = grep -n --color -E</div><div class="line">    cp = cherry-pick -x</div><div class="line">    cb = checkout -b</div><div class="line">[core]</div><div class="line">    filemode = true</div></pre></td></tr></table></figure>
<h3 id="Git常用命令"><a href="#Git常用命令" class="headerlink" title="Git常用命令"></a>Git常用命令</h3><p>查看、帮助命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git help &lt;command&gt;  # 显示command的help</div><div class="line">git show            # 显示某次提交的内容</div><div class="line">git show $id</div></pre></td></tr></table></figure>
<p>查看提交记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">git log</div><div class="line">git log &lt;file&gt;      # 查看该文件每次提交记录</div><div class="line">git log -p &lt;file&gt;   # 显示版本历史，以及版本间的内容差异</div><div class="line">git log -p -2       # 查看最近两次详细修改内容的diff</div><div class="line">git log --stat      # 查看提交统计信息</div><div class="line">git log --since=&quot;6 hours&quot;  # 显示最近6小时提交</div><div class="line">git log --before=&quot;2 days&quot;  # 显示2天前提交</div><div class="line">git log -1 HEAD~3          # 显示比HEAD早3个提交的那个提交</div><div class="line">git log -1 HEAD^^^</div><div class="line">git reflog                 # 查看操作记录</div></pre></td></tr></table></figure>
<p>添加、提交、删除、找回，重置修改文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">git co  -- &lt;file&gt;   # 抛弃工作区修改</div><div class="line">git co  .           # 抛弃工作区修改</div><div class="line">git co HEAD &lt;file&gt;  # 抛弃工作目录区中文件的修改</div><div class="line"></div><div class="line">git add &lt;file&gt;      # 将工作文件修改提交到本地暂存区</div><div class="line">git add .           # 将所有修改过的工作文件提交暂存区</div><div class="line"></div><div class="line">git rm &lt;file&gt;       # 从版本库中删除文件</div><div class="line">git rm &lt;file&gt; --cached  # 从版本库中删除文件，但不删除文件</div><div class="line"></div><div class="line">git reset &lt;file&gt;    # 从暂存区恢复到工作文件</div><div class="line">git reset -- .      # 从暂存区恢复到工作文件</div><div class="line">git reset --hard  HEAD^ # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改</div><div class="line">git reset --hard &lt;commit id&gt;  # 恢复到某一次提交的状态</div><div class="line">git reset HEAD &lt;file&gt; # 抛弃暂存区中文件的修改</div><div class="line"></div><div class="line">git ci &lt;file&gt;</div><div class="line">git ci .</div><div class="line">git ci -a           # 将git add, git rm和git ci等操作都合并在一起做</div><div class="line">git ci -am &quot;some comments&quot;</div><div class="line">git ci --amend      # 修改最后一次提交记录</div><div class="line"></div><div class="line">git revert &lt;$id&gt;    # 恢复某次提交的状态，恢复动作本身也创建了一次提交对象</div><div class="line">git revert HEAD     # 恢复最后一次提交的状态</div></pre></td></tr></table></figure>
<p>查看文件diff</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git diff &lt;file&gt;     # 比较当前文件和暂存区文件差异</div><div class="line">git diff</div><div class="line">git diff &lt;$id1&gt; &lt;$id2&gt;      # 比较两次提交之间的差异</div><div class="line">git diff &lt;branch1&gt;..&lt;branch2&gt;   # 在两个分支之间比较</div><div class="line">git diff --staged   # 比较暂存区和版本库差异</div><div class="line">git diff --cached   # 比较暂存区和版本库差异</div><div class="line">git diff --stat     # 仅仅比较统计信息</div></pre></td></tr></table></figure>
<h3 id="Git-本地分支管理"><a href="#Git-本地分支管理" class="headerlink" title="Git 本地分支管理"></a>Git 本地分支管理</h3><p>查看、切换、创建和删除分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">git br -r           # 查看远程分支</div><div class="line">git br -v           # 查看各个分支最后提交信息</div><div class="line">git br -a           # 列出所有分支</div><div class="line">git br --merged     # 查看已经被合并到当前分支的分支</div><div class="line">git br --no-merged  # 查看尚未被合并到当前分支的分支</div><div class="line">git br &lt;new_branch&gt; # 基于当前分支创建新的分支</div><div class="line">git br &lt;new_branch&gt;  &lt;start_point&gt;      # 基于另一个起点（分支名称，提交名称或则标签名称），创建新的分支</div><div class="line">git br -f &lt;existing_branch&gt;  &lt;start_point&gt; # 创建同名新分支，覆盖已有分支</div><div class="line">git br -d &lt;branch&gt;  # 删除某个分支</div><div class="line">git br -D &lt;branch&gt;  # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</div><div class="line"></div><div class="line">git co &lt;branch&gt;         # 切换到某个分支</div><div class="line">git co -b &lt;new_branch&gt;  # 创建新的分支，并且切换过去</div><div class="line">git co -b &lt;new_branch&gt; &lt;branch&gt;       # 基于branch创建新的new_branch</div><div class="line">git co -m &lt;existing_branch&gt; &lt;new_branch&gt;  # 移动或重命名分支，当新分支不存在时</div><div class="line">git co -M &lt;existing_branch&gt; &lt;new_branch&gt;  # 移动或重命名分支，当新分支存在时就覆盖</div><div class="line"></div><div class="line">git co $id               # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除</div><div class="line">git co $id -b &lt;new_branch&gt;       # 把某次历史提交记录checkout出来，创建成一个分支</div></pre></td></tr></table></figure>
<p>分支合并和rebase</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git merge &lt;branch&gt;                  # 将branch分支合并到当前分支</div><div class="line">git merge origin/master --no-ff     # 不要Fast-Foward合并，这样可以生成merge提交</div><div class="line">git merge --no-commit &lt;branch&gt;      # 合并但不提交</div><div class="line">git merge --squash &lt;branch&gt;         # 把一条分支上的内容合并到另一个分支上的一个提交</div><div class="line"></div><div class="line">git rebase master &lt;branch&gt;          # 将master rebase到branch，相当于：</div><div class="line">git co &lt;branch&gt; &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge &lt;branch&gt;</div></pre></td></tr></table></figure>
<p>Git补丁管理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git diff &gt; ../sync.patch         # 生成补丁</div><div class="line">git apply ../sync.patch          # 打补丁</div><div class="line">git apply --check ../sync.patch  # 测试补丁能否成功</div><div class="line">git format-patch -X              # 根据提交的log生成patch，X为数字，表示最近的几个日志</div></pre></td></tr></table></figure>
<p>Git暂存管理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git stash                        # 暂存</div><div class="line">git stash list                   # 列所有stash</div><div class="line">git stash apply                  # 恢复暂存的内容</div><div class="line">git stash drop                   # 删除暂存区</div></pre></td></tr></table></figure>
<p>Git远程分支管理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">git pull                         # 抓取远程仓库所有分支更新并合并到本地</div><div class="line">git pull --no-ff                 # 抓取远程仓库所有分支更新并合并到本地，不要快进合并</div><div class="line">git fetch origin                 # 抓取远程仓库所有更新</div><div class="line">git fetch origin remote-branch:local-branch #抓取remote-branch分支的更新</div><div class="line">git fetch origin --tags          # 抓取远程上的所有分支</div><div class="line">git checkout -b &lt;new-branch&gt; &lt;remote_tag&gt; # 抓取远程上的分支</div><div class="line">git merge origin/master          # 将远程主分支合并到本地当前分支</div><div class="line">git co --track origin/branch     # 跟踪某个远程分支创建相应的本地分支</div><div class="line">git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt;  # 基于远程分支创建本地分支，功能同上</div><div class="line"></div><div class="line">git push                         # push所有分支</div><div class="line">git push origin master           # 将本地主分支推到远程主分支</div><div class="line">git push -u origin master        # 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)</div><div class="line">git push origin &lt;local_branch&gt;   # 创建远程分支， origin是远程仓库名</div><div class="line">git push origin &lt;local_branch&gt;:&lt;remote_branch&gt;  # 创建远程分支</div><div class="line">git push origin :&lt;remote_branch&gt;  #先删除本地分支(git br -d &lt;branch&gt;)，然后再push删除远程分支</div><div class="line"></div><div class="line">#### Git远程仓库管理</div><div class="line"></div><div class="line">```bash</div><div class="line">git remote -v                    # 查看远程服务器地址和仓库名称</div><div class="line">git remote show origin           # 查看远程服务器仓库状态</div><div class="line">git remote add origin git@github:XXX/test.git         # 添加远程仓库地址</div><div class="line">git remote set-url origin git@github.com:XXX/test.git # 设置远程仓库地址(用于修改远程仓库地址)</div><div class="line">git remote rm &lt;repository&gt;       # 删除远程仓库</div><div class="line">git remote set-head origin master   # 设置远程仓库的HEAD指向master分支</div><div class="line"></div><div class="line">git branch --set-upstream master origin/master</div><div class="line">git branch --set-upstream develop origin/develop</div></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>打patch过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git add .</div><div class="line">git status</div><div class="line">git diff --cached &gt;XXX.patch</div><div class="line">git ci -m &apos;add patch&apos;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/06/18/tmux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/18/tmux/" itemprop="url">
                  多终端管理器tmux使用详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-19T00:00:00+08:00">
                2015-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>tmux是一个优秀的终端复用软件，类似GNU Screen，但来自于OpenBSD，采用BSD授权。使用它最直观的好处就是，通过一个终端登录远程主机并运行tmux后，在其中可以开启多个控制台而无需再“浪费”多余的终端来连接这台远程主机；当然其功能远不止于此。</p>
<p>ubuntu可以使用sudo apt-get install tmux来安装。安装完成后输入命令tmux即可打开软件，界面十分简单，类似一个下方带有状态栏的终端控制台；但根据tmux的定义，在开启了tmux服务器后，会首先创建一个会话，而这个会话则会首先创建一个窗口，其中仅包含一个面板；也就是说，这里看到的所谓终端控制台应该称作tmux的一个面板，虽然其使用方法与终端控制台完全相同。</p>
<p>tmux使用C/S模型构建，主要包括以下单元模块：</p>
<table class="table_border"><br>    <tbody><br>        <tr><br>            <td>server</td><br>            <td>服务器。输入tmux命令时就开启了一个服务器。</td><br>        </tr><br>        <tr><br>            <td>session</td><br>            <td>会话。一个服务器可以包含多个会话。</td><br>        </tr><br>        <tr><br>            <td>window</td><br>            <td>窗口。一个会话可以包含多个窗口。</td><br>        </tr><br>        <tr><br>            <td>pane</td><br>            <td>面板。一个窗口可以包含多个面板。</td><br>        </tr><br>    </tbody><br></table>

<h2 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tmux new -s session #建立会话</div><div class="line">tmux new -s session -d #在后台建立会话 </div><div class="line">tmux ls #列出会话 </div><div class="line">tmux attach -t session #进入某个会话</div></pre></td></tr></table></figure>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>类似各种平铺式窗口管理器，tmux使用键盘操作，常用快捷键包括：</p>
<table class="table_border"><br>    <tbody><br>        <tr><br>            <td colspan="2">Ctrl+b</td><br>            <td>激活控制台；此时以下按键生效</td><br>        </tr><br>        <tr><br>            <td rowspan="9">系统操作</td><br>            <td>?</td><br>            <td>列出所有快捷键；按q返回</td><br>        </tr><br>        <tr><br>            <td>d</td><br>            <td>脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话</td><br>        </tr><br>        <tr><br>            <td>D</td><br>            <td>选择要脱离的会话；在同时开启了多个会话时使用</td><br>        </tr><br>        <tr><br>            <td>Ctrl+z</td><br>            <td>挂起当前会话</td><br>        </tr><br>        <tr><br>            <td>r</td><br>            <td>强制重绘未脱离的会话</td><br>        </tr><br>        <tr><br>            <td>s</td><br>            <td>选择并切换会话；在同时开启了多个会话时使用</td><br>        </tr><br>        <tr><br>            <td>:</td><br>            <td>进入命令行模式；此时可以输入支持的命令，例如kill-server可以关闭服务器</td><br>        </tr><br>        <tr><br>            <td>[</td><br>            <td>进入复制模式；此时的操作与vi/emacs相同，按q/Esc退出</td><br>        </tr><br>        <tr><br>            <td>~</td><br>            <td>列出提示信息缓存；其中包含了之前tmux返回的各种提示信息</td><br>        </tr><br>        <tr><br>            <td rowspan="10">窗口操作</td><br>            <td>c</td><br>            <td>创建新窗口</td><br>        </tr><br>        <tr><br>            <td>&amp;</td><br>            <td>关闭当前窗口</td><br>        </tr><br>        <tr><br>            <td>数字键</td><br>            <td>切换至指定窗口</td><br>        </tr><br>        <tr><br>            <td>p</td><br>            <td>切换至上一窗口</td><br>        </tr><br>        <tr><br>            <td>n</td><br>            <td>切换至下一窗口</td><br>        </tr><br>        <tr><br>            <td>l</td><br>            <td>在前后两个窗口间互相切换</td><br>        </tr><br>        <tr><br>            <td>w</td><br>            <td>通过窗口列表切换窗口</td><br>        </tr><br>        <tr><br>            <td>,</td><br>            <td>重命名当前窗口；这样便于识别</td><br>        </tr><br>        <tr><br>            <td>.</td><br>            <td>修改当前窗口编号；相当于窗口重新排序</td><br>        </tr><br>        <tr><br>            <td>f</td><br>            <td>在所有窗口中查找指定文本</td><br>        </tr><br>        <tr><br>            <td rowspan="14">面板操作</td><br>            <td class="col1 centeralign">”</td><br>            <td>将当前面板平分为上下两块</td><br>        </tr><br>        <tr><br>            <td>%</td><br>            <td>将当前面板平分为左右两块</td><br>        </tr><br>        <tr><br>            <td>x</td><br>            <td>关闭当前面板</td><br>        </tr><br>        <tr><br>            <td>!</td><br>            <td>将当前面板置于新窗口；即新建一个窗口，其中仅包含当前面板</td><br>        </tr><br>        <tr><br>            <td>Ctrl+方向键</td><br>            <td>以1个单元格为单位移动边缘以调整当前面板大小</td><br>        </tr><br>        <tr><br>            <td>Alt+方向键</td><br>            <td>以5个单元格为单位移动边缘以调整当前面板大小</td><br>        </tr><br>        <tr><br>            <td>Space</td><br>            <td>在预置的面板布局中循环切换；依次包括even-horizontal、even-vertical、main-horizontal、main-vertical、tiled</td><br>        </tr><br>        <tr><br>            <td>q</td><br>            <td>显示面板编号</td><br>        </tr><br>        <tr><br>            <td>o</td><br>            <td>在当前窗口中选择下一面板</td><br>        </tr><br>        <tr><br>            <td>方向键</td><br>            <td>移动光标以选择面板</td><br>        </tr><br>        <tr><br>            <td>{</td><br>            <td>向前置换当前面板</td><br>        </tr><br>        <tr><br>            <td>}</td><br>            <td>向后置换当前面板</td><br>        </tr><br>        <tr><br>            <td>Alt+o</td><br>            <td>逆时针旋转当前窗口的面板</td><br>        </tr><br>        <tr><br>            <td>Ctrl+o</td><br>            <td>顺时针旋转当前窗口的面板</td><br>        </tr><br>    </tbody><br></table>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>tmux的系统级配置文件为/etc/tmux.conf，用户级配置文件为~/.tmux.conf。没有该文件新建一个即可。配置文件实际上就是tmux的命令集合，也就是说每行配置均可在进入命令行模式后输入生效。</p>
<p>注意：更改配置之后需要重启tmux或者进入命令模式（按按键前缀后再按: )输入 source-file ~/.tmux.conf即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#将ctrl-r键设置为加载配置文件，并显示&quot;reloaded!&quot;信息</div><div class="line">bind C-r source-file ~/.tmux.conf \; display &quot;Reloaded!&quot;</div></pre></td></tr></table></figure>
<p>copy-mode(复制模式)</p>
<p>a.PREFIX [ 进入复制模式<br>b.按 space 开始复制，移动光标选择复制区域<br>c.按 Enter 复制并退出copy-mode。<br>d.将光标移动到指定位置，按 PREIFX ] 粘贴 </p>
<p>在~/.tmux.conf中加入如下行，否则在VIM中复制模式无法完成操作 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setw -g mode-keys vi</div></pre></td></tr></table></figure>
<p>重新连接到之前的窗口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tmux attach</div></pre></td></tr></table></figure>
<p>不过如果没有会话会提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">no sessions</div></pre></td></tr></table></figure>
<p>修改Tmux配置如果无分离终端则新建，在.tmux.conf加入如下行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#将ctrl-r键设置为加载配置文件，并显示&quot;reloaded!&quot;信息</div><div class="line">bind C-r source-file ~/.tmux.conf \; display &quot;Reloaded!&quot;</div><div class="line"></div><div class="line">#tmux attach 如果无分离终端则新建</div><div class="line">new-session</div><div class="line"></div><div class="line">#此类配置可以在命令行模式中输入show-options -g查询</div><div class="line">set-option -g status-keys vi        #操作状态栏时的默认键盘布局；可以设置为vi或emacs</div><div class="line">set-option -g status-utf8 on        #开启状态栏的UTF-8支持</div><div class="line"></div><div class="line">#此类设置可以在命令行模式中输入show-window-options -g查询</div><div class="line">set-window-option -g mode-keys vi    #复制模式中的默认键盘布局；可以设置为vi或emacs</div><div class="line">set-window-option -g utf8 on        #开启窗口的UTF-8支持</div><div class="line"></div><div class="line">#选择分割的窗格,不需要松开ctrl键，多次跳转更方便</div><div class="line">bind C-k selectp -U            # 选择上窗格</div><div class="line">bind C-j selectp -D            # 选择下窗格</div><div class="line">bind C-h selectp -L            # 选择左窗格</div><div class="line">bind C-l selectp -R            # 选择右窗格</div><div class="line"></div><div class="line">#执行命令，比如 Manpage</div><div class="line">bind m command-prompt &quot;splitw -h &apos;exec man %%&apos;&quot;</div></pre></td></tr></table></figure>
<p>Start tmux on every shell login</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi ~/.bashrc</div></pre></td></tr></table></figure>
<p>添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># If not running interactively, do not do anything</div><div class="line">[[ $- != *i* ]] &amp;&amp; return</div><div class="line">[[ $TERM != screen* ]] &amp;&amp; exec tmux</div></pre></td></tr></table></figure>
<p>详细参考：<a href="https://wiki.archlinux.org/index.php/Tmux#Start_tmux_on_every_shell_login" target="_blank" rel="external">https://wiki.archlinux.org/index.php/Tmux#Start_tmux_on_every_shell_login</a></p>
<p>这样做，会使每一个该用户下的终端都进入tmux。如果需要ssh到其他机子上，进入其上的tmux 或 screen，会导致快捷键冲突以及显示混乱。</p>
<p>参考：</p>
<p>1.<a href="https://wiki.freebsdchina.org/software/t/tmux?utm_source=twitterfeed&amp;utm_medium=twitter" target="_blank" rel="external">https://wiki.freebsdchina.org/software/t/tmux?utm_source=twitterfeed&amp;utm_medium=twitter</a><br>2.<a href="http://linuxtoy.org/archives/from-screen-to-tmux.html" target="_blank" rel="external">http://linuxtoy.org/archives/from-screen-to-tmux.html</a><br>3.<a href="http://linuxtoy.org/archives/from-screen-to-tmux.html" target="_blank" rel="external">http://linuxtoy.org/archives/from-screen-to-tmux.html</a><br>4.<a href="http://os.51cto.com/art/200908/144275.htm" target="_blank" rel="external">http://os.51cto.com/art/200908/144275.htm</a><br>5.<a href="http://blog.onovps.com/archives/tmux-attach.html" target="_blank" rel="external">http://blog.onovps.com/archives/tmux-attach.html</a><br>6.<a href="http://tmux.sourceforge.net/" target="_blank" rel="external">http://tmux.sourceforge.net/</a><br>7.<a href="http://www.cnblogs.com/congbo/archive/2012/08/30/2649420.html" target="_blank" rel="external">http://www.cnblogs.com/congbo/archive/2012/08/30/2649420.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/06/16/javascript-questions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/16/javascript-questions/" itemprop="url">
                  一道经典的JavaScript试题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-17T00:00:00+08:00">
                2015-06-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var add = function (m) &#123;</div><div class="line"></div><div class="line">    var temp = function (n) &#123;</div><div class="line">        return add(m + n);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    temp.toString = function () &#123;</div><div class="line">        return m;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return temp;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">add(3)(4)(5); // 12</div><div class="line">add(3)(6)(9)(25); // 43</div></pre></td></tr></table></figure>
<p>这个add函数可以无限次调用循环调用，并且把所有传进去的值相加，最后返回相加总数。这道题咋一看有点特别，但代码量极其少而精，重点技术在于：作用域、交替、匿名函数、toString的巧妙。<br>让我们来解释这个过程：add(3)(4)(5)</p>
<ol>
<li>先执行add(3)，此时m=3，并且返回temp函数</li>
<li>执行temp(4)，这个函数内执行add(m+n)，n是此次传进来的数值4，m值还是上一步中的3，所以add(m+n)=add(3+4)=add(7)，此时m=7，并且返回temp函数</li>
<li>执行temp(5)，这个函数内执行add(m+n)，n是此次传进来的数值5，m值还是上一步中的7，所以add(m+n)=add(7+5)=add(12)，此时m=12，并且返回temp函数</li>
<li>串的方法，因此代码中temp函数的toString函数return m值，而m值是最后一步执行函数时的值m=12，所以返回值是12。</li>
</ol>
<p>看到这其实就很明白了，代码中temp.toString的重写只是为了函数不执行时能够返回最后运算的结果值，所以这个地方是可以任意修改的，你让它返回什么它就返回什么，比如改写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">temp.toString = function () &#123;</div><div class="line">    return &quot;total : &quot; + m;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; add(3)(4)(5);</div><div class="line">total : 12</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/06/02/mysql-sharding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/02/mysql-sharding/" itemprop="url">
                  MySQL分表分区
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-03T00:00:00+08:00">
                2015-06-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>垂直分表</strong></p>
<p>垂直分表就是一个包含有很多列的表拆分成多个表，比如表A包含20个字段，现在拆分成表A1和A2，两个表各十个字段（具体如何拆根据业务来选择）。</p>
<p>优势：在高并发的情境下，可以减少表锁和行锁的次数。</p>
<p>劣势：在数据记录非常大的情况下，读写速度还是会遇到瓶颈。</p>
<p><strong>水平分表</strong></p>
<p>假如某个网站，它的数据库的某个表已经达到了上亿条记录，那么此时如果通过select去查询，在没有索引的情况下，他的查询会非常慢，那么就可以通过hash算法将这个表分成10个子表（此时每个表的 的数据量只有1000万条了）。同时生成一个总表，记录各个子表的信息，假如查询一条id=100的记录，它不再需要全表扫描，而是通过总表找到该记录在哪个对应的子表上，然后再去相应的表做检索，这样就降低了IO压力。</p>
<p>劣势：会给前端程序应用程序的SQL代码的维护带来很大的麻烦，这时候可以使用MySQL的Merge存储引擎实现分表。</p>
<p>用Merge存储引擎分表，对应用程序的SQL语句来说是透明的，不需要修改任何代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE t1 (  a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,  message CHAR(20));</div><div class="line">CREATE TABLE t2 (  a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,  message CHAR(20));</div><div class="line"></div><div class="line">INSERT INTO t1 (message) VALUES (&apos;Testing&apos;),(&apos;table&apos;),(&apos;t1&apos;);</div><div class="line">INSERT INTO t2 (message) VALUES (&apos;Testing&apos;),(&apos;table&apos;),(&apos;t2&apos;);</div><div class="line"></div><div class="line">CREATE TABLE total (a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, message CHAR(20)) ENGINE=MERGE  UNION=(t1,t2) INSERT_METHOD=LAST;</div></pre></td></tr></table></figure>
<p>实际上merge存储引擎是一个虚拟的表，对应的实际表必须是myisam类型的表，如果你的mysql是5.1以上版本，默认数据库使用的事InnoDB存储引擎的，所以在创建total时，t1和t2表必须是myisam存储引擎的。</p>
<p>如果需要定期增加分表，只需要修改merge表的union即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE t3(  a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,  message CHAR(20));</div><div class="line">ALTER TABLE total  UNION=(t1,t2,t3)</div></pre></td></tr></table></figure>
<p><strong>横向分区</strong></p>
<p>举例说明：假如有100W条数据，分成十份，前10W条数据放到第一个分区，第二个10W条数据放到第二个分区，依此类推。取出一条数据的时候，这条数据包含了表结构中的所有字段，横向分区并没有改变表的结构。</p>
<p>分区表分为RANGE,LIST,HASH,KEY四种类型,并且分区表的索引是可以局部针对分区表建立的<br>创建分区表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE sales (   </div><div class="line">    id INT AUTO_INCREMENT,   </div><div class="line">    amount DOUBLE NOT NULL,   </div><div class="line">    order_day DATETIME NOT NULL,   </div><div class="line">    PRIMARY KEY(id, order_day)   </div><div class="line">) ENGINE=Innodb PARTITION BY RANGE(YEAR(order_day)) (   </div><div class="line">    PARTITION p_2010 VALUES LESS THAN (2010),   </div><div class="line">    PARTITION p_2011 VALUES LESS THAN (2011),   </div><div class="line">    PARTITION p_2012 VALUES LESS THAN (2012),   </div><div class="line">    PARTITION p_catchall VALUES LESS THAN MAXVALUE);</div></pre></td></tr></table></figure>
<p><strong>纵向分区</strong></p>
<p>举例说明：在设计用户表的时候，开始的时候没有考虑好，而把个人的所有信息都放到了一张表里面去，这个表里面就会有比较大的字段，如个人简介，而这些简介呢，也许不会有好多人去看，所以等到有人要看的时候，再去查找，分表的时候，可以把这样的大字段，分开来</p>
<p>完整的一张表，都对应三个文件，一个.MYD数据文件，.MYI索引文件，.frm表结构文件。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/05/24/regex-expression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/24/regex-expression/" itemprop="url">
                  常用正则表达式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-25T00:00:00+08:00">
                2015-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>说明：正则表达式通常用于两种任务：1.验证，2.搜索/替换。用于验证时，通常需要在前后分别加上^和$，以匹配整个待验证字符串；搜索/替换时是否加上此限定则根据搜索的要求而定，此外，也有可能要在前后加上\b而不是^和$。此表所列的常用正则表达式，除个别外均未在前后加上任何限定，请根据需要，自行处理。</p>
<table class="table_border"><br>    <thead><br>        <tr><br>            <th>说明</th><br>            <th>正则表达式</th><br>        </tr><br>    </thead><br>    <tbody><br>        <tr><br>            <td>网址（URL）</td><br>            <td><span class="regex">[a-zA-z]+://[^\s]<em></em></span></td><br>        </tr><br>        <tr><br>            <td>IP地址(IP Address)</td><br>            <td><span class="regex">((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</span></td><br>        </tr><br>        <tr><br>            <td>电子邮件(Email)</td><br>            <td><span class="regex">\w+([-+.]\w+)@\w+([-.]\w+)<em>.\w+([-.]\w+)</em></span></td><br>        </tr><br>        <tr><br>            <td>QQ号码</td><br>            <td><span class="regex">[1-9]\d{4,}</span></td><br>        </tr><br>        <tr><br>            <td>HTML标记(包含内容或自闭合)</td><br>            <td><span class="regex">&lt;(.<em>)(.</em>)&gt;.<em>&lt;\/\1&gt;|&lt;(.</em>) \/&gt;</span></td><br>        </tr><br>        <tr><br>            <td>密码(由数字/大写字母/小写字母/标点符号组成，四种都必有，8位以上)</td><br>            <td><span class="regex">(?=^.{8,}$)(?=.<em>\d)(?=.</em>\W+)(?=.<em>[A-Z])(?=.</em>[a-z])(?!.<em>\n).</em>$</span></td><br>        </tr><br>        <tr><br>            <td>日期(年-月-日)</td><br>            <td><span class="regex">(\d{4}|\d{2})-((1[0-2])|(0?[1-9]))-(([12][0-9])|(3[01])|(0?[1-9]))</span></td><br>        </tr><br>        <tr><br>            <td>日期(月/日/年)</td><br>            <td><span class="regex">((1[0-2])|(0?[1-9]))/(([12][0-9])|(3[01])|(0?[1-9]))/(\d{4}|\d{2})</span></td><br>        </tr><br>        <tr><br>            <td>时间(小时:分钟, 24小时制)</td><br>            <td><span class="regex">((1|0?)[0-9]|2[0-3]):([0-5][0-9])</span></td><br>        </tr><br>        <tr><br>            <td>汉字(字符)</td><br>            <td><span class="regex">[\u4e00-\u9fa5]</span></td><br>        </tr><br>        <tr><br>            <td>中文及全角标点符号(字符)</td><br>            <td><span class="regex">[\u3000-\u301e\ufe10-\ufe19\ufe30-\ufe44\ufe50-\ufe6b\uff01-\uffee]</span></td><br>        </tr><br>        <tr><br>            <td>中国大陆固定电话号码</td><br>            <td><span class="regex">(\d{4}-|\d{3}-)?(\d{8}|\d{7})</span></td><br>        </tr><br>        <tr><br>            <td>中国大陆手机号码</td><br>            <td><span class="regex">1\d{10}</span></td><br>        </tr><br>        <tr><br>            <td>中国大陆邮政编码</td><br>            <td><span class="regex">[1-9]\d{5}</span></td><br>        </tr><br>        <tr><br>            <td>中国大陆身份证号(15位或18位)</td><br>            <td><span class="regex">\d{15}(\d\d[0-9xX])?</span></td><br>        </tr><br>        <tr><br>            <td>非负整数(正整数或零)</td><br>            <td><span class="regex">\d+</span></td><br>        </tr><br>        <tr><br>            <td>正整数</td><br>            <td><span class="regex">[0-9]<em>[1-9][0-9]</em></span></td><br>        </tr><br>        <tr><br>            <td>负整数</td><br>            <td><span class="regex">-[0-9]<em>[1-9][0-9]</em></span></td><br>        </tr><br>        <tr><br>            <td>整数</td><br>            <td><span class="regex">-?\d+</span></td><br>        </tr><br>        <tr><br>            <td>小数</td><br>            <td><span class="regex">(-?\d+)(.\d+)?</span></td><br>        </tr><br>        <tr><br>            <td>不包含abc的单词</td><br>            <td><span class="regex">\b((?!abc)\w)+\b</span></td><br>        </tr><br>    </tbody><br></table>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/05/18/all-vim-cheatsheat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/18/all-vim-cheatsheat/" itemprop="url">
                  史上最全Vim快捷键键位图 -- 入门到进阶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-19T05:49:00+08:00">
                2015-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：卢钧轶(cenalulu)<br>本文原文地址：<a href="http://cenalulu.github.io&lt;!--￼0--" target="_blank" rel="external">http://cenalulu.github.io&lt;!--￼0--</a>&gt;</p>
</blockquote>
<hr>
<h2 id="经典版"><a href="#经典版" class="headerlink" title="经典版"></a>经典版</h2><p>下面这个键位图应该是大家最常看见的经典版了。其实这个版本是一系列的入门教程键位图的组合结果。要查看不同编辑模式下的键位图，可以看<a href="http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html" target="_blank" rel="external">这里打包下载</a><br>此外，<a href="http://blog.ngedit.com/vi-vim-cheat-sheet-sch.gif" target="_blank" rel="external">这里</a>还有简体中文版。</p>
<p><img src="/images/tool/vim/classic.gif" alt="classic"></p>
<hr>
<h2 id="入门版"><a href="#入门版" class="headerlink" title="入门版"></a>入门版</h2><p>基本操作的入门版。<a href="https://github.com/ahrencode/Miscellaneous" target="_blank" rel="external">原版出处</a>还有keynote版本可供DIY以及其他相关有用的cheatsheet。</p>
<p><img src="/images/tool/vim/entry.png" alt="entry"></p>
<hr>
<h2 id="进阶版"><a href="#进阶版" class="headerlink" title="进阶版"></a>进阶版</h2><p>下图是300DPI的超清大图，另外<a href="http://michael.peopleofhonoronly.com/vim/" target="_blank" rel="external">查看原文</a>还有更多版本：黑白，低分辨率，色盲等</p>
<p><img src="/images/tool/vim/advanced.png" alt="advanced"></p>
<hr>
<h2 id="增强版"><a href="#增强版" class="headerlink" title="增强版"></a>增强版</h2><p>下图是一个更新时间较新的现代版，含有的信息也更丰富。<a href="http://vimcheatsheet.com/" target="_blank" rel="external">原文链接</a></p>
<p><img src="/images/tool/vim/morden.png" alt="morden"></p>
<hr>
<h2 id="文字版"><a href="#文字版" class="headerlink" title="文字版"></a>文字版</h2><p><a href="http://tnerual.eriogerg.free.fr/vimqrc.pdf" target="_blank" rel="external">原文链接</a><br><img src="/images/tool/vim/text.png" alt="text"><br><img src="/images/tool/vim/text2.png" alt="text"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/04/01/ishan-in-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/01/ishan-in-python/" itemprop="url">
                  Python 判断汉字
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-02T00:00:00+08:00">
                2015-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用 unicode 范围 \u4e00 - \u9fff 来判别汉字</p>
<p>unicode 分配给汉字（中日韩越统一表意文字）的范围为 4E00-9FFF </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def ishan(text):</div><div class="line">    # for python 2.x, 3.3+</div><div class="line">    # sample: ishan(u&apos;一&apos;) == True, ishan(u&apos;我&amp;&amp;你&apos;) == False</div><div class="line">    return all(u&apos;\u4e00&apos; &lt;= char &lt;= u&apos;\u9fff&apos; for char in text)</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/03/22/pure-js-ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/22/pure-js-ajax/" itemprop="url">
                  原生JS实现AJAX
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-23T00:00:00+08:00">
                2015-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-原生Ajax"><a href="#1-原生Ajax" class="headerlink" title="1. 原生Ajax"></a>1. 原生Ajax</h2><p>ajax的技术核心是 XMLHttpRequest 对象；<br>ajax 请求过程：创建 XMLHttpRequest 对象、连接服务器、发送请求、接收响应数据；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">ajax(&#123;</div><div class="line">    url: &quot;./test_xhr.php&quot;, //请求地址</div><div class="line">    type: &quot;POST&quot;, //请求方式</div><div class="line">    data: &#123;</div><div class="line">        name: &quot;super&quot;,</div><div class="line">        age: 20</div><div class="line">    &#125;, //请求参数</div><div class="line">    dataType: &quot;json&quot;,</div><div class="line">    success: function(response, xml) &#123;</div><div class="line">        // 此处放成功后执行的代码</div><div class="line">    &#125;,</div><div class="line">    fail: function(status) &#123;</div><div class="line">        // 此处放失败后执行的代码</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">function ajax(options) &#123;</div><div class="line">    options = options || &#123;&#125;;</div><div class="line">    options.type = (options.type || &quot;GET&quot;).toUpperCase();</div><div class="line">    options.dataType = options.dataType || &quot;json&quot;;</div><div class="line">    var params = formatParams(options.data);</div><div class="line"></div><div class="line">    //创建 - 非IE6 - 第一步</div><div class="line">    if (window.XMLHttpRequest) &#123;</div><div class="line">        var xhr = new XMLHttpRequest();</div><div class="line">    &#125; else &#123; //IE6及其以下版本浏览器</div><div class="line">        var xhr = new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //接收 - 第三步</div><div class="line">    xhr.onreadystatechange = function() &#123;</div><div class="line">        // readyState值说明</div><div class="line">        // 0,初始化,XHR对象已经创建,还未执行open</div><div class="line">        // 1,载入,已经调用open方法,但是还没发送请求</div><div class="line">        // 2,载入完成,请求已经发送完成</div><div class="line">        // 3,交互,可以接收到部分数据</div><div class="line">        // 4,完成</div><div class="line"></div><div class="line">        // status值说明</div><div class="line">        // 200:成功</div><div class="line">        // 404:没有发现文件、查询或URl</div><div class="line">        // 500:服务器产生内部错误</div><div class="line">        if (xhr.readyState == 4) &#123;</div><div class="line">            var status = xhr.status;</div><div class="line">            if (status &gt;= 200 &amp;&amp; status &lt; 300) &#123;</div><div class="line">                options.success &amp;&amp; options.success(xhr.responseText, xhr.responseXML);</div><div class="line">            &#125; else &#123;</div><div class="line">                options.fail &amp;&amp; options.fail(status);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //连接 和 发送 - 第二步</div><div class="line">    if (options.type == &quot;GET&quot;) &#123;</div><div class="line">        xhr.open(&quot;GET&quot;, options.url + &quot;?&quot; + params, true);</div><div class="line">        xhr.send(null);</div><div class="line">    &#125; else if (options.type == &quot;POST&quot;) &#123;</div><div class="line">        xhr.open(&quot;POST&quot;, options.url, true);</div><div class="line">        //设置表单提交时的内容类型</div><div class="line">        xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);</div><div class="line">        xhr.send(params);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//格式化参数</div><div class="line">function formatParams(data) &#123;</div><div class="line">    var arr = [];</div><div class="line">    for (var name in data) &#123;</div><div class="line">        arr.push(encodeURIComponent(name) + &quot;=&quot; + encodeURIComponent(data[name]));</div><div class="line">    &#125;</div><div class="line">    arr.push((&quot;v=&quot; + Math.random()).replace(&quot;.&quot;));</div><div class="line">    return arr.join(&quot;&amp;&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>参考</p>
<ol>
<li><a href="http://www.html-js.com/article/1882" target="_blank" rel="external">原生JS实现AJAX、JSONP及DOM加载完成事件</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/03/22/mysql-copy-table/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/22/mysql-copy-table/" itemprop="url">
                  Mysql复制表(表结构、索引、数据)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-23T00:00:00+08:00">
                2015-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Mysql复制表+主键(表结构、索引和主键、数据)</p>
<p>mysql&gt; create table test_users like users;<br>复制表结构和索引到test_users (新表:test_users 原表:users)</p>
<p>mysql&gt; insert into test_users (select * from users);<br>复制数据,两步加起来才能创建一个和users完全一样(表结构、索引和主键、数据)的表。</p>
<p>mysql&gt; create table test_users select * from users;<br>(只复制表数据，以及表结构)</p>
<p>mysql&gt; create table test_users select names from users;<br>复制users表里的names数据、结构到新表 test_users</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://deweing.github.io/2015/03/15/the-continuous-transmission-on-the-breakpoint/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DW">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/2382711">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/15/the-continuous-transmission-on-the-breakpoint/" itemprop="url">
                  判断服务器是否支持断点续传
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-16T00:00:00+08:00">
                2015-03-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>通常情况下，Web服务器(如Apache)会默认开启对断点续传的支持。因此，如果直接通过Web服务器来提供文件的下载，可以不必做特别的配置，即可享受到断点续传的好处。断点续传是在发起HTTP请求的时候加入RANGE头来告诉服务器客户端已经下载了多少字节。等所有这些请求都返回之后，再把得到的内容一块一块的拼接起来得到完整的资源。</p>
<p>1.判断服务器是否支持断点续传</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget -S http://www.example.com/test.zip 2&gt;&amp;1 | grep &apos;Accept-Ranges&apos;</div><div class="line"> Accept-Ranges: bytes</div></pre></td></tr></table></figure>
<p>输出结果 Accept-Ranges: bytes ，说明服务器支持按字节下载。</p>
<p>2.curl 命令发送字节范围下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -–range 0-99 http://www.example.com/test.zip &gt; t.zip</div></pre></td></tr></table></figure>
<p>3.FileDownload.class.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">&lt;?php  </div><div class="line"></div><div class="line">class FileDownload&#123; </div><div class="line">  </div><div class="line">    private $_speed = 512;  </div><div class="line">  </div><div class="line">  </div><div class="line">    /** 下载 </div><div class="line">    * @param String  $file   要下载的文件路径 </div><div class="line">    * @param String  $name   文件名称,为空则与下载的文件名称一样 </div><div class="line">    * @param boolean $reload 是否开启断点续传 </div><div class="line">    */  </div><div class="line">    public function download($file, $name=&apos;&apos;, $reload=false)</div><div class="line">    &#123;  </div><div class="line">        if(file_exists($file))</div><div class="line">        &#123;  </div><div class="line">            if($name==&apos;&apos;)</div><div class="line">            &#123;  </div><div class="line">                $name = basename($file);  </div><div class="line">            &#125;  </div><div class="line">  </div><div class="line">            $fp = fopen($file, &apos;rb&apos;);  </div><div class="line">            $file_size = filesize($file);  </div><div class="line">            $ranges = $this-&gt;getRange($file_size);  </div><div class="line">  </div><div class="line">            header(&apos;cache-control:public&apos;);  </div><div class="line">            header(&apos;content-type:application/octet-stream&apos;);  </div><div class="line">            header(&apos;content-disposition:attachment; filename=&apos;.$name);  </div><div class="line">  </div><div class="line">            if($reload &amp;&amp; $ranges!=null)</div><div class="line">            &#123; // 使用续传  </div><div class="line">                header(&apos;HTTP/1.1 206 Partial Content&apos;);  </div><div class="line">                header(&apos;Accept-Ranges:bytes&apos;);  </div><div class="line">      </div><div class="line">                // 剩余长度  </div><div class="line">                header(sprintf(&apos;content-length:%u&apos;,$ranges[&apos;end&apos;]-$ranges[&apos;start&apos;]));  </div><div class="line">      </div><div class="line">                // range信息  </div><div class="line">                header(sprintf(&apos;content-range:bytes %s-%s/%s&apos;, $ranges[&apos;start&apos;], $ranges[&apos;end&apos;], $file_size));  </div><div class="line">      </div><div class="line">                // fp指针跳到断点位置  </div><div class="line">                fseek($fp, sprintf(&apos;%u&apos;, $ranges[&apos;start&apos;]));  </div><div class="line">            &#125;else&#123;  </div><div class="line">                header(&apos;HTTP/1.1 200 OK&apos;);  </div><div class="line">                header(&apos;content-length:&apos;.$file_size);  </div><div class="line">            &#125;  </div><div class="line">  </div><div class="line">            while(!feof($fp))</div><div class="line">            &#123;  </div><div class="line">                echo fread($fp, round($this-&gt;_speed*1024,0));  </div><div class="line">                ob_flush();  </div><div class="line">                //sleep(1); // 用于测试,减慢下载速度  </div><div class="line">            &#125;  </div><div class="line">      </div><div class="line">            ($fp!=null) &amp;&amp; fclose($fp);  </div><div class="line">      </div><div class="line">        &#125;else&#123;  </div><div class="line">            return &apos;&apos;;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">  </div><div class="line">    /** 设置下载速度 </div><div class="line">    * @param int $speed </div><div class="line">    */  </div><div class="line">    public function setSpeed($speed)</div><div class="line">    &#123;  </div><div class="line">        if(is_numeric($speed) &amp;&amp; $speed&gt;16 &amp;&amp; $speed&lt;4096)</div><div class="line">        &#123;  </div><div class="line">            $this-&gt;_speed = $speed;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">  </div><div class="line">    /** 获取header range信息 </div><div class="line">    * @param  int   $file_size 文件大小 </div><div class="line">    * @return Array </div><div class="line">    */  </div><div class="line">    private function getRange($file_size)</div><div class="line">    &#123;  </div><div class="line">        if(isset($_SERVER[&apos;HTTP_RANGE&apos;]) &amp;&amp; !empty($_SERVER[&apos;HTTP_RANGE&apos;]))</div><div class="line">        &#123;  </div><div class="line">            $range = $_SERVER[&apos;HTTP_RANGE&apos;];  </div><div class="line">            $range = preg_replace(&apos;/[\s|,].*/&apos;, &apos;&apos;, $range);  </div><div class="line">            $range = explode(&apos;-&apos;, substr($range, 6));  </div><div class="line">            if(count($range)&lt;2)</div><div class="line">            &#123;  </div><div class="line">                $range[1] = $file_size;  </div><div class="line">            &#125;  </div><div class="line">            $range = array_combine(array(&apos;start&apos;,&apos;end&apos;), $range);  </div><div class="line">            if(empty($range[&apos;start&apos;]))</div><div class="line">            &#123;  </div><div class="line">                $range[&apos;start&apos;] = 0;  </div><div class="line">            &#125;  </div><div class="line">            if(empty($range[&apos;end&apos;]))</div><div class="line">            &#123;  </div><div class="line">                $range[&apos;end&apos;] = $file_size;  </div><div class="line">            &#125;  </div><div class="line">            return $range;  </div><div class="line">        &#125;  </div><div class="line">        return null;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125; // class end  </div><div class="line">  </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php  </div><div class="line">    require(&apos;FileDownload.class.php&apos;);  </div><div class="line">    $file = &apos;book.zip&apos;;  </div><div class="line">    $name = time().&apos;.zip&apos;;  </div><div class="line">    $obj = new FileDownload();  </div><div class="line">    $flag = $obj-&gt;download($file, $name);  </div><div class="line">    //$flag = $obj-&gt;download($file, $name, true); // 断点续传  </div><div class="line">      </div><div class="line">    if(!$flag)&#123;  </div><div class="line">        echo &apos;file not exists&apos;;  </div><div class="line">    &#125;  </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>4.Discuz!论坛软件的attachment.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$range = 0; </div><div class="line">if($readmod == 4) </div><div class="line">&#123; </div><div class="line">    dheader(&apos;Accept-Ranges: bytes&apos;); </div><div class="line">    if(!emptyempty($_SERVER[&apos;HTTP_RANGE&apos;])) </div><div class="line">    &#123; </div><div class="line">        list($range) = explode(&apos;-&apos;,(str_replace(&apos;bytes=&apos;, &apos;&apos;, $_SERVER[&apos;HTTP_RANGE&apos;]))); </div><div class="line">        $rangesize = ($filesize - $range) &gt; 0 ? ($filesize - $range) : 0; </div><div class="line">        dheader(&apos;Content-Length: &apos;.$rangesize); </div><div class="line">        dheader(&apos;HTTP/1.1 206 Partial Content&apos;); </div><div class="line">        dheader(&apos;Content-Range: bytes=&apos;.$range.&apos;-&apos;.($filesize-1).&apos;/&apos;.($filesize)); </div><div class="line">    &#125; </div><div class="line">&#125;  </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/2382711"
               alt="DW" />
          <p class="site-author-name" itemprop="name">DW</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DW</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
